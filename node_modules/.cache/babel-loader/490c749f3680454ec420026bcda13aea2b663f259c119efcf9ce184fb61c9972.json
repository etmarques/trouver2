{"ast":null,"code":"'use strict';\n\nconst {\n  attrsGroups\n} = require('./_collections');\nexports.name = 'convertStyleToAttrs';\nexports.description = 'converts style to attributes';\n\n/**\n * @type {(...args: string[]) => string}\n */\nconst g = function () {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  return '(?:' + args.join('|') + ')';\n};\nconst stylingProps = attrsGroups.presentation;\nconst rEscape = '\\\\\\\\(?:[0-9a-f]{1,6}\\\\s?|\\\\r\\\\n|.)'; // Like \\\" or \\2051. Code points consume one space.\nconst rAttr = '\\\\s*(' + g('[^:;\\\\\\\\]', rEscape) + '*?)\\\\s*'; // attribute name like ‘fill’\nconst rSingleQuotes = \"'(?:[^'\\\\n\\\\r\\\\\\\\]|\" + rEscape + \")*?(?:'|$)\"; // string in single quotes: 'smth'\nconst rQuotes = '\"(?:[^\"\\\\n\\\\r\\\\\\\\]|' + rEscape + ')*?(?:\"|$)'; // string in double quotes: \"smth\"\nconst rQuotedString = new RegExp('^' + g(rSingleQuotes, rQuotes) + '$');\n// Parentheses, E.g.: url(data:image/png;base64,iVBO...).\n// ':' and ';' inside of it should be threated as is. (Just like in strings.)\nconst rParenthesis = '\\\\(' + g('[^\\'\"()\\\\\\\\]+', rEscape, rSingleQuotes, rQuotes) + '*?' + '\\\\)';\n// The value. It can have strings and parentheses (see above). Fallbacks to anything in case of unexpected input.\nconst rValue = '\\\\s*(' + g('[^!\\'\"();\\\\\\\\]+?', rEscape, rSingleQuotes, rQuotes, rParenthesis, '[^;]*?') + '*?' + ')';\n// End of declaration. Spaces outside of capturing groups help to do natural trimming.\nconst rDeclEnd = '\\\\s*(?:;\\\\s*|$)';\n// Important rule\nconst rImportant = '(\\\\s*!important(?![-(\\\\w]))?';\n// Final RegExp to parse CSS declarations.\nconst regDeclarationBlock = new RegExp(rAttr + ':' + rValue + rImportant + rDeclEnd, 'ig');\n// Comments expression. Honors escape sequences and strings.\nconst regStripComments = new RegExp(g(rEscape, rSingleQuotes, rQuotes, '/\\\\*[^]*?\\\\*/'), 'ig');\n\n/**\n * Convert style in attributes. Cleanups comments and illegal declarations (without colon) as a side effect.\n *\n * @example\n * <g style=\"fill:#000; color: #fff;\">\n *             ⬇\n * <g fill=\"#000\" color=\"#fff\">\n *\n * @example\n * <g style=\"fill:#000; color: #fff; -webkit-blah: blah\">\n *             ⬇\n * <g fill=\"#000\" color=\"#fff\" style=\"-webkit-blah: blah\">\n *\n * @author Kir Belevich\n *\n * @type {import('./plugins-types').Plugin<'convertStyleToAttrs'>}\n */\nexports.fn = (_root, params) => {\n  const {\n    keepImportant = false\n  } = params;\n  return {\n    element: {\n      enter: node => {\n        if (node.attributes.style != null) {\n          // ['opacity: 1', 'color: #000']\n          let styles = [];\n          /**\n           * @type {Record<string, string>}\n           */\n          const newAttributes = {};\n\n          // Strip CSS comments preserving escape sequences and strings.\n          const styleValue = node.attributes.style.replace(regStripComments, match => {\n            return match[0] == '/' ? '' : match[0] == '\\\\' && /[-g-z]/i.test(match[1]) ? match[1] : match;\n          });\n          regDeclarationBlock.lastIndex = 0;\n          // eslint-disable-next-line no-cond-assign\n          for (var rule; rule = regDeclarationBlock.exec(styleValue);) {\n            if (!keepImportant || !rule[3]) {\n              styles.push([rule[1], rule[2]]);\n            }\n          }\n          if (styles.length) {\n            styles = styles.filter(function (style) {\n              if (style[0]) {\n                var prop = style[0].toLowerCase(),\n                  val = style[1];\n                if (rQuotedString.test(val)) {\n                  val = val.slice(1, -1);\n                }\n                if (stylingProps.includes(prop)) {\n                  newAttributes[prop] = val;\n                  return false;\n                }\n              }\n              return true;\n            });\n            Object.assign(node.attributes, newAttributes);\n            if (styles.length) {\n              node.attributes.style = styles.map(declaration => declaration.join(':')).join(';');\n            } else {\n              delete node.attributes.style;\n            }\n          }\n        }\n      }\n    }\n  };\n};","map":{"version":3,"names":["attrsGroups","require","exports","name","description","g","_len","arguments","length","args","Array","_key","join","stylingProps","presentation","rEscape","rAttr","rSingleQuotes","rQuotes","rQuotedString","RegExp","rParenthesis","rValue","rDeclEnd","rImportant","regDeclarationBlock","regStripComments","fn","_root","params","keepImportant","element","enter","node","attributes","style","styles","newAttributes","styleValue","replace","match","test","lastIndex","rule","exec","push","filter","prop","toLowerCase","val","slice","includes","Object","assign","map","declaration"],"sources":["C:/Users/AGU/Documents/trouver2/node_modules/svgo/plugins/convertStyleToAttrs.js"],"sourcesContent":["'use strict';\n\nconst { attrsGroups } = require('./_collections');\n\nexports.name = 'convertStyleToAttrs';\nexports.description = 'converts style to attributes';\n\n/**\n * @type {(...args: string[]) => string}\n */\nconst g = (...args) => {\n  return '(?:' + args.join('|') + ')';\n};\n\nconst stylingProps = attrsGroups.presentation;\nconst rEscape = '\\\\\\\\(?:[0-9a-f]{1,6}\\\\s?|\\\\r\\\\n|.)'; // Like \\\" or \\2051. Code points consume one space.\nconst rAttr = '\\\\s*(' + g('[^:;\\\\\\\\]', rEscape) + '*?)\\\\s*'; // attribute name like ‘fill’\nconst rSingleQuotes = \"'(?:[^'\\\\n\\\\r\\\\\\\\]|\" + rEscape + \")*?(?:'|$)\"; // string in single quotes: 'smth'\nconst rQuotes = '\"(?:[^\"\\\\n\\\\r\\\\\\\\]|' + rEscape + ')*?(?:\"|$)'; // string in double quotes: \"smth\"\nconst rQuotedString = new RegExp('^' + g(rSingleQuotes, rQuotes) + '$');\n// Parentheses, E.g.: url(data:image/png;base64,iVBO...).\n// ':' and ';' inside of it should be threated as is. (Just like in strings.)\nconst rParenthesis =\n  '\\\\(' + g('[^\\'\"()\\\\\\\\]+', rEscape, rSingleQuotes, rQuotes) + '*?' + '\\\\)';\n// The value. It can have strings and parentheses (see above). Fallbacks to anything in case of unexpected input.\nconst rValue =\n  '\\\\s*(' +\n  g(\n    '[^!\\'\"();\\\\\\\\]+?',\n    rEscape,\n    rSingleQuotes,\n    rQuotes,\n    rParenthesis,\n    '[^;]*?'\n  ) +\n  '*?' +\n  ')';\n// End of declaration. Spaces outside of capturing groups help to do natural trimming.\nconst rDeclEnd = '\\\\s*(?:;\\\\s*|$)';\n// Important rule\nconst rImportant = '(\\\\s*!important(?![-(\\\\w]))?';\n// Final RegExp to parse CSS declarations.\nconst regDeclarationBlock = new RegExp(\n  rAttr + ':' + rValue + rImportant + rDeclEnd,\n  'ig'\n);\n// Comments expression. Honors escape sequences and strings.\nconst regStripComments = new RegExp(\n  g(rEscape, rSingleQuotes, rQuotes, '/\\\\*[^]*?\\\\*/'),\n  'ig'\n);\n\n/**\n * Convert style in attributes. Cleanups comments and illegal declarations (without colon) as a side effect.\n *\n * @example\n * <g style=\"fill:#000; color: #fff;\">\n *             ⬇\n * <g fill=\"#000\" color=\"#fff\">\n *\n * @example\n * <g style=\"fill:#000; color: #fff; -webkit-blah: blah\">\n *             ⬇\n * <g fill=\"#000\" color=\"#fff\" style=\"-webkit-blah: blah\">\n *\n * @author Kir Belevich\n *\n * @type {import('./plugins-types').Plugin<'convertStyleToAttrs'>}\n */\nexports.fn = (_root, params) => {\n  const { keepImportant = false } = params;\n  return {\n    element: {\n      enter: (node) => {\n        if (node.attributes.style != null) {\n          // ['opacity: 1', 'color: #000']\n          let styles = [];\n          /**\n           * @type {Record<string, string>}\n           */\n          const newAttributes = {};\n\n          // Strip CSS comments preserving escape sequences and strings.\n          const styleValue = node.attributes.style.replace(\n            regStripComments,\n            (match) => {\n              return match[0] == '/'\n                ? ''\n                : match[0] == '\\\\' && /[-g-z]/i.test(match[1])\n                ? match[1]\n                : match;\n            }\n          );\n\n          regDeclarationBlock.lastIndex = 0;\n          // eslint-disable-next-line no-cond-assign\n          for (var rule; (rule = regDeclarationBlock.exec(styleValue)); ) {\n            if (!keepImportant || !rule[3]) {\n              styles.push([rule[1], rule[2]]);\n            }\n          }\n\n          if (styles.length) {\n            styles = styles.filter(function (style) {\n              if (style[0]) {\n                var prop = style[0].toLowerCase(),\n                  val = style[1];\n\n                if (rQuotedString.test(val)) {\n                  val = val.slice(1, -1);\n                }\n\n                if (stylingProps.includes(prop)) {\n                  newAttributes[prop] = val;\n\n                  return false;\n                }\n              }\n\n              return true;\n            });\n\n            Object.assign(node.attributes, newAttributes);\n\n            if (styles.length) {\n              node.attributes.style = styles\n                .map((declaration) => declaration.join(':'))\n                .join(';');\n            } else {\n              delete node.attributes.style;\n            }\n          }\n        }\n      },\n    },\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}